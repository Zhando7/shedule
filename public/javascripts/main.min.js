"use strict";function checkValue(e,t){if(void 0!==e&&void 0!==t)return!0;M.toast({html:"Заполните все поля!"})}function checkExistsDates(e,t){void 0!==e.docs&&(0<e.docs.length?createCalendar(t,e.docs):(document.getElementById("calendar").style.display="none",M.toast({html:"Выбранный месяц не заполнен датами"})))}function findSelectMonth(t,e){if(document.getElementById("tableLessons").style.display="none",void 0===t||void 0===e)return null;var n="/view/dates/".concat(e),a=new XMLHttpRequest;a.open("GET",n,!0),a.setRequestHeader("Content-Type","application/json"),a.addEventListener("load",function(){var e=JSON.parse(a.response);4==a.readyState&&200==a.status?checkExistsDates(e,t):console.log(e.msg)}),a.send(null)}function createCalendar(e,t){for(var n='<table class="striped centered"><thead><tr><th>пн</th><th>вт</th><th>ср</th><th>чт</th><th>пт</th><th>сб</th></tr></thead><tbody><tr>',a=new Date(t[0].full_date).getDay(),o=0,s=1;s<a;s++)n+="<td></td>";for(;o<t.length;)0!=new Date(t[o].full_date).getDay()&&(n+=createCell(t,o)),6==new Date(t[o].full_date).getDay()&&o<t.length-1&&(n+="</tr><tr>"),o++;n+="</tr></tbody></table>",document.getElementById("".concat(e)).innerHTML=n,document.getElementById("".concat(e)).style.display="block"}function createCell(e,t){var n='id="'.concat(e[t]._id,'"'),a="onclick=\"getLessons('".concat(e[t]._id,"')\""),o=new Date(e[t].full_date).getDate();return"<td ".concat(n," ").concat(a,">").concat(o,"</td>")}function getLessons(e){if(void 0===e)return null;var t="/view/lessons/".concat(e),n=new XMLHttpRequest;n.open("GET",t,!0),n.setRequestHeader("Content-Type","application/json"),n.addEventListener("load",function(){var e=JSON.parse(n.response);4==n.readyState&&200==n.status?e.docs.length?createLessonsTable(e.docs):(document.getElementById("tableLessons").style.display="none",M.toast({html:"Уроков на эту дату не имеется"})):console.log(e.msg)}),n.send(null)}function createLessonsTable(e){if(void 0!==e){for(var t=document.getElementById("tableLessons"),n='\n                <table class="striped centered">\n                <thead>\n                    <tr>\n                        <th>Время</th>\n                        <th>Название</th>\n                        <th>Описание</th>\n                    </tr>\n                </thead>\n                <tbody>  \n            ',a=0;a<e.length;)n+="\n                <tr>\n                    <td>".concat(e[a].time_start," - ").concat(e[a].time_end,"</td>\n                    <td>").concat(e[a].title,"</td>\n                    <td>").concat(e[a].desc,"</td>\n                </tr>\n            "),a++;t.style.display="block",t.innerHTML=n+"</tbody></table>"}}console.log("Hello user"),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".modal");M.Modal.init(e)}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".sidenav");M.Sidenav.init(e)}),document.getElementById("submitLogin").addEventListener("click",function(e){e.preventDefault();var t=document.forms.loginForm,n=t.elements.user_name.value,a=t.elements.user_pass.value;if(checkValue(n,a)){var o=new XMLHttpRequest,s=JSON.stringify({name:n,password:a});o.open("POST","/login",!0),o.setRequestHeader("Content-Type","application/json"),o.addEventListener("load",function(){var e=JSON.parse(o.response);4==o.readyState&&200==o.status?location.replace(document.baseURI+"admin"):M.toast({html:e.msg})}),o.send(s)}});