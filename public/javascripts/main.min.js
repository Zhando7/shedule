"use strict";function checkValue(t,e){if(t&&e)return!0;M.toast({html:"Заполните все поля!"})}function checkExistsDates(t){this&&t&&(this.docs.length?createCalendar(t,this.docs):(document.getElementById("calendar").style.display="none",M.toast({html:"Данный месяц не заполнен датами"})))}function findSelectMonth(e,t){if(document.getElementById("tableLessons").style.display="none",!e||!t)return null;var n="/view/dates/".concat(t),a=new XMLHttpRequest;a.open("GET",n,!0),a.setRequestHeader("Content-Type","application/json"),a.addEventListener("load",function(){var t=JSON.parse(a.response);4==a.readyState&&200==a.status?checkExistsDates.call(t,e):console.log(t.msg)}),a.send(null)}function createCalendar(t,e){for(var n='<table class="striped centered"><thead><tr><th>пн</th><th>вт</th><th>ср</th><th>чт</th><th>пт</th><th>сб</th></tr></thead><tbody><tr>',a=new Date(e[0].full_date).getDay(),s=0,o=1;o<a;o++)n+="<td></td>";for(;s<e.length;)0!=new Date(e[s].full_date).getDay()&&(n+=createCell.call(e,s)),6==new Date(e[s].full_date).getDay()&&s<e.length-1&&(n+="</tr><tr>"),s++;n+="</tr></tbody></table>",document.getElementById("".concat(t)).innerHTML=n,document.getElementById("".concat(t)).style.display="block"}function createCell(t){var e='id="'.concat(this[t]._id,'"'),n="onclick=\"getLessons('".concat(this[t]._id,"')\""),a=new Date(this[t].full_date).getDate();return"<td ".concat(e," ").concat(n,">").concat(a,"</td>")}function getLessons(t){if(!t)return null;var e="/view/lessons/".concat(t),n=new XMLHttpRequest;n.open("GET",e,!0),n.setRequestHeader("Content-Type","application/json"),n.addEventListener("load",function(){var t=JSON.parse(n.response);4==n.readyState&&200==n.status?t.docs.length?createLessonsTable.call(t.docs):(document.getElementById("tableLessons").style.display="none",M.toast({html:"Уроков на эту дату не имеется"})):console.log(t.msg)}),n.send(null)}function createLessonsTable(){if(this){for(var t=document.getElementById("tableLessons"),e='\n                <table class="striped centered">\n                <thead>\n                    <tr>\n                        <th>Время</th>\n                        <th>Название</th>\n                        <th>Описание</th>\n                    </tr>\n                </thead>\n                <tbody>  \n            ',n=0;n<this.length;)e+="\n                <tr>\n                    <td>".concat(this[n].time_start," - ").concat(this[n].time_end,"</td>\n                    <td>").concat(this[n].title,"</td>\n                    <td>").concat(this[n].desc,"</td>\n                </tr>\n            "),n++;t.style.display="block",t.innerHTML=e+"</tbody></table>"}}console.log("Hello"),document.addEventListener("DOMContentLoaded",function(){var t=document.querySelectorAll(".modal");M.Modal.init(t)}),document.addEventListener("DOMContentLoaded",function(){var t=document.querySelectorAll(".sidenav");M.Sidenav.init(t)}),document.getElementById("submitLogin").addEventListener("click",function(t){t.preventDefault();var e=document.forms.loginForm,n=e.elements.user_name.value,a=e.elements.user_pass.value;if(checkValue(n,a)){var s=new XMLHttpRequest,o=JSON.stringify({name:n,password:a});s.open("POST","/login",!0),s.setRequestHeader("Content-Type","application/json"),s.addEventListener("load",function(){var t=JSON.parse(s.response);4==s.readyState&&200==s.status?location.replace(document.baseURI+"admin"):M.toast({html:t.msg})}),s.send(o)}});