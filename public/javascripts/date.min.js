"use strict";function checkValue(e){if(e)return!0;M.toast({html:"Вы не выбрали дату!"})}function getFormatDate(e){return new Date(e).getDate()}function addRowToTable(){var e=document.getElementById("tableDate"),t=e.insertRow(e.length),n=t.insertCell(0),a=t.insertCell(1),o=t.insertCell(2);t.setAttribute("id","tr__".concat(this._id)),n.setAttribute("class","hide-on-small-only"),a.setAttribute("id","td__".concat(this._id)),n.innerHTML="".concat(this._id),a.innerHTML='<a href="/admin/lesson/'.concat(this._id,'">').concat(getFormatDate(this.full_date),"</a>"),o.innerHTML=getOperation.call(this)}function getOperation(){var e=this._id;return"<a onclick=\"editSelectDate('".concat(e,'\')" class="waves-effect waves-light btn"><i class="editLink small material-icons">edit</i></a>')+" "+"<a onclick=\"delSelectDate('".concat(e,'\')" class="waves-effect waves-light btn"><i class="small material-icons">delete</i></a>')}function delSelectDate(t){var e="/admin/date/".concat(t),n=new XMLHttpRequest;n.open("DELETE",e,!0),n.setRequestHeader("Content-Type","application/json"),n.addEventListener("load",function(){var e=JSON.parse(n.response);4==n.readyState&&200==n.status?document.getElementById("tr__".concat(t)).remove():console.log(e.msg)}),n.send(null)}function editSelectDate(e){var t="/admin/date/select/".concat(e),n=new XMLHttpRequest;n.open("GET",t,!0),n.setRequestHeader("Content-Type","application/json"),n.addEventListener("load",function(){var e=JSON.parse(n.response);4==n.readyState&&200==n.status?(triggerForm(!0),document.forms.editForm.setAttribute("value",e.docs._id)):console.log(e.msg)}),n.send(null)}function triggerForm(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=document.getElementsByClassName("__date"),o=document.getElementsByClassName("__date-edit");function i(e){for(var t=0;t<a.length;t++)a[t].style.display=e}switch(e){case!0:i("none"),o[0].style.display="block";break;case!1:o[0].style.display="none",i("block"),document.getElementById("td__".concat(t)).innerHTML='<a href="/admin/lesson/'.concat(t,'">').concat(getFormatDate(n),"</a>");break;default:o[0].style.display="none",i("block")}}document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".sidenav");M.Sidenav.init(e)}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".datepicker");M.Datepicker.init(e,{i18n:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],weekdaysAbbrev:["В","П","В","С","Ч","П","С"]}})}),document.getElementById("submitCreateDate").addEventListener("click",function(e){e.preventDefault();var t=document.querySelector(".datepicker");if(checkValue(t.value)){var n=new XMLHttpRequest,a=document.getElementById("tableDate").getAttribute("value"),o=new Date(t.value),i=JSON.stringify({id_month:a,full_date:o});n.open("POST","/admin/date",!0),n.setRequestHeader("Content-Type","application/json"),n.addEventListener("load",function(){var e=JSON.parse(n.response);4==n.readyState&&200==n.status?(t.value="",addRowToTable.call(e.docs)):console.log(e.msg)}),n.send(i)}}),document.getElementById("submitEditDate").addEventListener("click",function(e){e.preventDefault();var t=document.forms.editForm.querySelector(".datepicker");if(checkValue(t.value)){var n=new XMLHttpRequest,a=document.forms.editForm.getAttribute("value"),o=t.value,i=JSON.stringify({_id:a,full_date:o});n.open("PUT","/admin/date",!0),n.setRequestHeader("Content-Type","application/json"),n.addEventListener("load",function(){var e=JSON.parse(n.response);4==n.readyState&&200==n.status?triggerForm(!1,a,o):console.log(e.msg)}),n.send(i)}});