"use strict";function checkValue(e){return 1<=e&&e<=12||(M.toast({html:'Неправильное значение поля: "Выберите месяц"'}),!1)}function addRowToTable(){var e=document.getElementById("tableMonth"),t=e.insertRow(e.length),n=t.insertCell(0),o=t.insertCell(1),a=t.insertCell(2);t.setAttribute("id","tr__".concat(this._id)),n.setAttribute("class","hide-on-small-only"),o.setAttribute("id","td__".concat(this._id)),n.innerHTML="".concat(this._id),o.innerHTML='<a href="/admin/month/'.concat(this._id,'">').concat(this.month.title,"</a>"),a.innerHTML=getOperation.call(this)}function getOperation(){var e=this._id;return"<a onclick=\"editSelectMonth('".concat(e,'\')" class="waves-effect waves-light btn"><i class="editLink small material-icons">edit</i></a>')+" "+"<a onclick=\"delSelectMonth('".concat(e,'\')" class="waves-effect waves-light btn"><i class="small material-icons">delete</i></a>')}function delSelectMonth(t){var e="/admin/month/".concat(t),n=new XMLHttpRequest;n.open("DELETE",e,!0),n.setRequestHeader("Content-Type","application/json"),n.addEventListener("load",function(){var e=JSON.parse(n.response);4==n.readyState&&200==n.status?document.getElementById("tr__".concat(t)).remove():console.log(e.msg)}),n.send(null)}function editSelectMonth(e){var t="/admin/month/select/".concat(e),n=new XMLHttpRequest;n.open("GET",t,!0),n.setRequestHeader("Content-Type","application/json"),n.addEventListener("load",function(){var e=JSON.parse(n.response);if(4==n.readyState&&200==n.status){triggerForm(!0);var t=document.forms.editForm.querySelector("select");document.forms.editForm.setAttribute("value",e.docs._id),t.selectedIndex=e.docs.month.number}else console.log(e.msg)}),n.send(null)}function triggerForm(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,o=document.getElementsByClassName("__month"),a=document.getElementsByClassName("__month-edit");function s(e){for(var t=0;t<o.length;t++)o[t].style.display=e}switch(e){case!0:s("none"),a[0].style.display="block";break;case!1:a[0].style.display="none",s("block"),document.getElementById(t).innerHTML='<a href="/admin/month/'.concat(t,'">').concat(n,"</a>");break;default:a[0].style.display="none",s("block")}}console.log("Hello, admin"),document.getElementById("submitCreateMonth").addEventListener("click",function(e){e.preventDefault();var t=document.querySelector("select"),n=document.getElementById("tableMonth").getAttribute("value"),o={number:t.selectedIndex,title:t.options[t.selectedIndex].label};if(checkValue(o.number)){var a=JSON.stringify({id_year:n,month:o}),s=new XMLHttpRequest;s.open("POST","/admin/month",!0),s.setRequestHeader("Content-Type","application/json"),s.addEventListener("load",function(){var e=JSON.parse(s.response);4==s.readyState&&200==s.status?(t.selectedIndex=0,addRowToTable.call(e.docs)):console.log(e.msg)}),s.send(a)}}),document.getElementById("submitEditMonth").addEventListener("click",function(e){e.preventDefault();var t=document.forms.editForm.querySelector("select"),n=document.forms.editForm.getAttribute("value"),o={number:t.selectedIndex,title:t.options[t.selectedIndex].label};if(checkValue(o.number)){var a=JSON.stringify({_id:n,month:o}),s=new XMLHttpRequest;s.open("PUT","/admin/month",!0),s.setRequestHeader("Content-Type","application/json"),s.addEventListener("load",function(){var e=JSON.parse(s.response);4==s.readyState&&200==s.status?triggerForm(!1,"td__".concat(n),o.title):console.log(e.msg)}),s.send(a)}});