"use strict";function checkValue(e,t,n,s){var o=0;return e?o++:M.toast({html:"Время начало урока не задано"}),t?o++:M.toast({html:"Время окончания урока не задано"}),n?o++:M.toast({html:"Название урока не задано"}),s?o++:M.toast({html:"Описание урока не задано"}),4===o&&3<=n.length&&3<=s.length}function clearCreateFormInputs(){var e=document.forms.createForm.querySelectorAll(".timepicker");e[0].value="",e[1].value="",document.getElementById("titleCreate").value="",document.getElementById("descCreate").value=""}function addRowToTable(e){if(void 0!==e){var t=document.getElementById("tableLesson"),n=t.insertRow(t.length),s=n.insertCell(0),o=n.insertCell(1),a=n.insertCell(2),i=n.insertCell(3);n.setAttribute("id","tr__".concat(e._id)),s.setAttribute("id","time__".concat(e._id)),o.setAttribute("id","title__".concat(e._id)),a.setAttribute("id","desc__".concat(e._id)),s.innerHTML="".concat(e.time_start," - ").concat(e.time_end),o.innerHTML=e.title,a.innerHTML=e.desc,i.innerHTML=getOperation(e)}}function getOperation(e){var t=e._id;return"<a onclick=\"editSelectLesson('".concat(t,'\')" class="waves-effect waves-light btn"><i class="editLink small material-icons">edit</i></a>')+" "+"<a onclick=\"delSelectLesson('".concat(t,'\')" class="waves-effect waves-light btn"><i class="small material-icons">delete</i></a>')}function delSelectLesson(t){if(void 0!==t){var e="/admin/lesson/".concat(t),n=new XMLHttpRequest;n.open("DELETE",e,!0),n.setRequestHeader("Content-Type","application/json"),n.addEventListener("load",function(){var e=JSON.parse(n.response);4==n.readyState&&200==n.status?document.getElementById("tr__".concat(t)).remove():console.log(e.msg)}),n.send(null)}}function editSelectLesson(e){if(void 0!==e){var t="/admin/lesson/select/".concat(e),n=new XMLHttpRequest;n.open("GET",t,!0),n.setRequestHeader("Content-Type","application/json"),n.addEventListener("load",function(){var e=JSON.parse(n.response);4==n.readyState&&200==n.status?(triggerForm(!0),document.forms.editForm.setAttribute("value",e.docs._id)):console.log(e.msg)}),n.send(null)}}function triggerForm(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,s=document.getElementsByClassName("__lesson"),o=document.getElementsByClassName("__lesson-edit");function a(e){for(var t=0;t<s.length;t++)s[t].style.display=e}switch(e){case!0:a("none"),o[0].style.display="block";break;case!1:o[0].style.display="none",a("block"),document.getElementById("time__".concat(t)).innerHTML=n.time_start+" - "+n.time_end,document.getElementById("title__".concat(t)).innerHTML=n.title,document.getElementById("desc__".concat(t)).innerHTML=n.desc;break;default:o[0].style.display="none",a("block")}}document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".sidenav");M.Sidenav.init(e)}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".timepicker");M.Timepicker.init(e)}),document.getElementById("submitCreateLesson").addEventListener("click",function(e){e.preventDefault();var t=document.forms.createForm.querySelectorAll(".timepicker"),n=t[0].value,s=t[1].value,o=document.getElementById("titleCreate").value,a=document.getElementById("descCreate").value;if(checkValue(n,s,o,a)){var i=document.getElementById("tableLesson").getAttribute("value"),l=new XMLHttpRequest,d=JSON.stringify({id_date:i,time_start:n,time_end:s,title:o,desc:a});l.open("POST","/admin/lesson",!0),l.setRequestHeader("Content-Type","application/json"),l.addEventListener("load",function(){var e=JSON.parse(l.response);4==l.readyState&&200==l.status?(clearCreateFormInputs(),addRowToTable(e.docs)):console.log(e.msg)}),l.send(d)}}),document.getElementById("submitEditLesson").addEventListener("click",function(e){e.preventDefault();var t=document.forms.editForm.querySelectorAll(".timepicker"),n=t[0].value,s=t[1].value,o=document.getElementById("titleEdit").value,a=document.getElementById("descEdit").value;if(checkValue(n,s,o,a)){var i=new XMLHttpRequest,l=document.forms.editForm.getAttribute("value"),d=JSON.stringify({_id:l,time_start:n,time_end:s,title:o,desc:a});i.open("PUT","/admin/lesson",!0),i.setRequestHeader("Content-Type","application/json"),i.addEventListener("load",function(){var e=JSON.parse(i.response);4==i.readyState&&200==i.status?triggerForm(!1,l,JSON.parse(d)):console.log(e.msg)}),i.send(d)}});